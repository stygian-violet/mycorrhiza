{{define "interwiki map"}}Intermap{{end}}
{{define "name"}}Name{{end}}
{{define "aliases"}}Aliases{{end}}
{{define "aliases (,)"}}Aliases (separated by commas){{end}}
{{define "engine"}}Engine{{end}}
{{define "engine/mycorrhiza"}}Mycorrhiza 🍄{{end}}
{{define "engine/betula"}}Betula 🌳{{end}}
{{define "engine/agora"}}Agora ἀ{{end}}
{{define "engine/generic"}}Generic (any website){{end}}
{{define "url"}}URL{{end}}
{{define "link href format"}}Link href attribute format string{{end}}
{{define "img src format"}}Image src attribute format string{{end}}
{{define "unset map"}}No interwiki map set.{{end}}
{{define "add interwiki entry"}}Add interwiki entry{{end}}
{{define "save"}}Save{{end}}
{{define "delete"}}Delete{{end}}

{{define "title"}}
	{{- if .Name -}}
		{{.Name}}
	{{- else -}}
		{{template "add interwiki entry"}}
	{{- end -}}
{{end}}

{{define "body"}}
	<main class="main-width">
		<h1>{{template "title"}}</h1>
		{{if .Error}}
		<p class="notice notice--error">
			<strong>{{block "error" .}}Error{{end}}:</strong>
			{{.Error}}
		</p>
		{{end}}
		<form method="post" action="{{.Meta.Root}}interwiki/{{.Action}}" class="form--interwiki">
			<p>
				<label for="name" class="required-field">{{template "name"}}:</label>
				<input type="text" id="name" name="name" required
				       value="{{.Wiki.Name}}" placeholder="home_wiki">
			</p>
			<p>
				<label for="aliases">{{template "aliases (,)"}}:</label>
				<input type="text" id="aliases" name="aliases"
				       value="{{range $j, $alias := .Wiki.Aliases}}{{if gt $j 0}}, {{end}}{{.}}{{end}}"
				       placeholder="homewiki, hw">
			</p>
			<p>
				<label for="url" class="required-field">{{template "url"}}:</label>
				<input type="url" id="url" name="url" required
				       value="{{.Wiki.URL}}" placeholder="https://wiki.example.org">
			</p>
			<p>
				<label for="engine" class="required-field">{{template "engine"}}:</label>
				<select name="engine" id="engine" required>
					<option value="mycorrhiza" {{if eq .Wiki.Engine "mycorrhiza"}}selected{{end}}>{{template "engine/mycorrhiza"}}</option>
					<option value="betula" {{if eq .Wiki.Engine "betula"}}selected{{end}}>{{template "engine/betula"}}</option>
					<option value="agora" {{if eq .Wiki.Engine "agora"}}selected{{end}}>{{template "engine/agora"}}</option>
					<option value="generic" {{if eq .Wiki.Engine "generic"}}selected{{end}}>{{template "engine/generic"}}</option>
				</select>
			</p>
			<p>
				<label for="link-href-format">{{template "link href format"}}:</label>
				<input type="url" id="link-href-format" name="link-href-format"
				       value="{{.Wiki.LinkHrefFormat}}"
				       placeholder="https://wiki.example.org/view/{NAME}">
			</p>
			<p>
				<label for="img-src-format">{{template "img src format"}}:</label>
				<input type="url" id="img-src-format" name="img-src-format"
				       value="{{.Wiki.ImgSrcFormat}}"
				       placeholder="https://wiki.example.org/media/{NAME}">
			</p>
			<button type="submit" name="action" class="btn btn_accent" value="save">
				{{template "save"}}
			</button>
			{{if .CanDelete}}
			<button type="submit" name="action" class="btn btn_destructive" value="delete">
				{{template "delete"}}
			</button>
			{{end}}
			<a class="btn btn_weak" href="{{.Meta.Root}}interwiki">{{template "cancel"}}</a>
		</form>
	</main>
{{end}}
